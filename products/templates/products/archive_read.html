{% extends "base.html" %}
{% load static %}
{% block title %}
  {{ product.title }} - Read Archive | The Elysium Archive
{% endblock title %}
{% block meta_description %}
  Read the complete archive entry for {{ product.title }} from The Elysium Archive.
{% endblock meta_description %}
{% block content %}
  <!-- Archive reading page - immersive layout -->
  <!-- Navigation: my_archive -->
  <section class="container">
    <!-- Navigation breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'home' %}">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{% url 'my_archive' %}">My Archive</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">{{ product.title }}</li>
      </ol>
    </nav>
    <!-- Archive reading content -->
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10 col-xl-9">
        <article class="panel p-4 p-lg-5">
          <!-- Hero image -->
          {% if product.image %}
            <div class="mb-5">
              <img src="{{ product.image.url }}"
                   alt="{{ product.image_alt|default:product.title }}"
                   class="img-fluid rounded shadow w-100 archive-hero-image">
            </div>
          {% endif %}
          <!-- Archive header -->
          <header class="mb-5 pb-4 border-bottom">
            <h1 class="display-5 mb-3 text-danger">{{ product.title }}</h1>
            {% if product.tagline %}<p class="lead text-muted fst-italic mb-4">{{ product.tagline }}</p>{% endif %}
            <div class="d-flex flex-wrap gap-3 align-items-center small">
              {% if product.category %}
                <span class="badge text-bg-secondary">
                  <i class="fa-solid fa-folder me-1"></i>{{ product.category.name }}
                </span>
              {% endif %}
              {% if product.is_deal %}
                <span class="badge badge-deal-gold">
                  <i class="fa-solid fa-tag me-1"></i>ðŸ’° DEAL
                </span>
              {% endif %}
              <span class="muted">
                <i class="fa-solid fa-calendar-days me-1"></i>
                Archived {{ product.created_at|date:"M d, Y" }}
              </span>
              <!-- Purchase price info -->
              {% if product.is_deal and product.get_discount_percentage > 0 %}
                <span class="muted">
                  <i class="fa-solid fa-euro-sign me-1"></i>
                  Purchased: <del>â‚¬{{ product.price }}</del> <strong class="text-success">â‚¬{{ product.get_discounted_price }}</strong>
                  <span class="badge bg-danger ms-1">-{{ product.get_discount_percentage }}%</span>
                </span>
              {% else %}
                <span class="muted">
                  <i class="fa-solid fa-euro-sign me-1"></i>
                  Purchased: â‚¬{{ product.price }}
                </span>
              {% endif %}
            </div>
          </header>
          <!-- Full archive content -->
          <div class="archive-reading-content">
            <h2 class="h4 mb-4 text-danger">
              <i class="fa-solid fa-book-open me-2"></i>Complete Archive Entry
            </h2>
            <div class="lh-lg">{{ product.content|safe }}</div>
          </div>
          <!-- Navigation footer -->
          <footer class="mt-5 pt-4 border-top">
            <div class="d-flex flex-wrap gap-3 justify-content-between">
              <a href="{% url 'my_archive' %}" class="btn btn-outline-light btn-icon">
                <i class="fa-solid fa-arrow-left me-2"></i>Back to My Archive
              </a>
              {% if not product.is_removed %}
                <a href="{% url 'product_detail' product.slug %}"
                   class="btn btn-outline-light btn-icon">
                  <i class="fa-solid fa-info-circle me-2"></i>View Details
                </a>
              {% endif %}
            </div>
          </footer>
        </article>
      </div>
    </div>
  </section>
{% endblock content %}
